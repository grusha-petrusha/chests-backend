# API protocol

This is a description of a client-server API protocol. <br>
Let client be **C** and server be **S**.

1. Pre-initialization <br>
  Description: This state is dedicated for the room creation. <br>
  Request options:
    - Create room <br>
      **C** creates room via **createRoom**(*roomSettings*) <br>
      **S** resonds with the (*roomId*)

2. Initialization <br>
  Description: This state is dedicated for all players to connect to the room. <br>
  Request options:
    - Join room <br>
      **C** joins room via **joinRoom**(*roomId*, *nickname*) <br>
      **S** responds with the (*playerId*, *roomSettings*)
    - Get game state (optional) <br>
      **C** requests current state of the game via **state**(*playerId*) <br>
      **S** responds with the (*cards*, *turn*, *players*)
    - Ready <br>
      **C** requests **ready**(*playerId*) <br>
      **S** responds with the (*status*)

3. Game <br>
  Description: This state is dedicated for the basically playing. <br>
  Request options:
    - Take card <br>
      **ะก** takes card from another player via **take**(*playerId*, *target_index*, *card*) <br>
      **S** responds with the (*status*)
    - Get game state (optional) <br>
      **C** requests current state of the game via **state**(*playerId*) <br>
      **S** responds with the (*cards*, *turn*, *players*)
    - Ready <br>
      **C** requests **ready**(*playerId*) <br>
      **S** responds with the (*status*)

4. New game <br>
  Description: This state is dedicated for players to start a new game. <br>
  Request options:
    - Ready <br>
      **C** requests **ready**(*playerId*) <br>
      **S** responds with the (*status*)


# Structures

**String**: Unicode encoded sequence of characters. <br>
**Number**: Integer value. <br>
**List(T)**: Sequence of object with **T** type.

## Room settings
```
roomSettings: {
  "name": String,
  "players_count": Number,
  "deck_mode": Number,
  "show_hand_count": Number,
  "start_hand_count": Number
}
```
- **name**: Name of the room <br>
- **players_count**: Exact number of players to play the game <br>
- **deck_mode**: Mode of the deck (0: 36 cards; 1: 52 cards) <br>
- **show_hand_count**: Player's ability to see how many cards other players have (0: disabled, 1: enabled) <br>
- **start_hand_count**: How many cards each player has at the game start

## Room ID
```
roomId: String
```
- **roomId**: Unique ID, generated by server, which points to the game room

## Nickname
```
nickname: String
```
- **nickname**: Player's nickname

## Player ID
```
playerId: String
```
- **playerId**: Unique ID, generated by server, which points to the player

## Cards
```
cards: List(Number)
```
- **cards**: List of player's cards

## Turn
```
turn: Number
```
- **turn**: ID of a player, which has now a turn (-1: requesting player, 0-(players_count): otherwise)

## Players
```
players: List(
  {
    nickname: String,
    ready: Number,
    cards_count: Number
  }
)
```
- **players**: List of all players, except the requesting one, that have multiple parameters:
  - **nickname**: Player's nickname <br>
  - **ready**: Done with making a turn of ready to begin a new game(0: not ready, 1: ready, 2: finished) <br>
  - **cards_count**: Number of cards, which player has

## Status
```
status: Number
```
- **status**: Request status (0: failed, 1: success)

## Card
```
card: Number
```
- **card**: Card ID